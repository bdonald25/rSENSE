<% thumb = nil %>
<% if @box_vis.thumb_id != nil %>
 <% thumb = @box_vis.try(:tn_src) %>
<% else %>
 <% type = JSON.parse(@box_vis.data)["defaultVis"] %>
 <% case type %>
 <% when "Map" %>
   <% thumb = image_path("vis_map.png") %>
 <% when "Table" %>
   <% thumb = image_path("vis_table.png") %>
 <% when "Summary" %>
   <% thumb = image_path("vis_summary.png") %>
 <% else %>
   <% thumb = image_path("vis_#{type.downcase}_light.png") %>
 <% end %>
<% end %>

<div class="col-xs-12 col-sm-4 col-md-3 col-lg-3">
  <div class="mdl-card mdl-shadow--2dp">
    <a href="<%= visualization_path @box_vis %>">
      <div class="mdl-card__title" style="background-image:url( <%= thumb %>);"></div>
    </a>
    <div class="mdl-card__supporting-text">
      <div class="item-title">
        <%= link_to @box_vis.name.html_safe, @box_vis %>
      </div>
      by <a href="<%= user_url(@box_vis.owner) %>">
      <%= @box_vis.owner.name %> </a><br/>
      <%= @box_vis.created_at.strftime("%B %d, %Y") %><br/>
    </div>
  </div>
</div>