machine:
  ruby:
    version: 2.1.1

dependencies:
  pre:
    - sudo apt-get update; sudo apt-get install libreoffice libreoffice-calc unoconv; sudo apt-get install ruby-railties-4.0 bundler;
    - gem uninstall bundler
    - gem install bundler
  post:
    - bundle exec rake assets:precompile
    - bundle exec rake db:preprep
    - psql -c 'create database rsense_test;' -U postgres
    - RAILS_ENV=test bundle exec rake db:migrate --trace
    - bundle exec rake db:test:prepare


## Customize database setup
database:
  override:
    - bundle exec rake db:create db:schema:load

test:
  override:
    - xvfb-run -a bundle exec rspec
      parallel: true
      files:
        - spec/**/*_spec.rb
        - lib/inter_exchange/spec/**/*_spec.rb
